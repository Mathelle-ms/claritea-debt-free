<!DOCTYPE html>
<html lang="en">
<head>
  <title>Claritea Debt Free Calculator</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: #f8f9fa; color: #212529; line-height: 1.6; }
    .container { max-width: 900px; margin: 0 auto; padding: 0 1rem; }
    
    /* Gradient Pulse Banner (More Visible) */
    .banner {
      background: linear-gradient(rgba(30, 64, 175, 0.85), rgba(30, 64, 175, 0.85)), 
                  url('https://images.unsplash.com/photo-1553729459-efe14ef6055d?w=1200&h=400&fit=crop');
      background-size: cover; background-position: center;
      color: white; padding: 4rem 1rem; text-align: center;
      position: relative; overflow: hidden;
      animation: bannerSlide 1s ease-out;
    }
    
    /* More Visible Gradient Pulse */
    .banner::before {
      content: '';
      position: absolute;
      top: 0; left: 0; right: 0; bottom: 0;
      background: linear-gradient(rgba(59, 130, 246, 0.3), rgba(30, 64, 175, 0.3));
      animation: gradientPulse 6s ease-in-out infinite; /* Slower & more visible */
      z-index: 1;
    }
    
    @keyframes gradientPulse {
      0%, 100% { opacity: 0.2; }
      50% { opacity: 0.7; } /* More pronounced */
    }
    
    /* Banner Text Animations (on top of pulse) */
    .banner h1 { 
      font-size: 2.5rem; margin-bottom: 0.5rem; letter-spacing: -0.5px;
      animation: textDrop 0.8s ease-out 0.3s both;
      position: relative; z-index: 2;
    }
    .banner p { 
      font-size: 1.1rem; opacity: 0.9; max-width: 600px; margin: 0 auto;
      animation: textFadeUp 0.8s ease-out 0.6s both;
      position: relative; z-index: 2;
    }
    
    /* Yellow Animated Text in Headline */
    #animated-text {
      color: #fbbf24; /* yellow */
      animation: pulse 2s ease-in-out infinite;
    }
    
    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.8; }
    }
    
    @keyframes bannerSlide {
      from { transform: translateY(-30px); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }
    @keyframes textDrop {
      from { transform: translateY(-20px); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }
    @keyframes textFadeUp {
      from { transform: translateY(20px); opacity: 0; }
      to { transform: translateY(0); opacity: 0.9; }
    }
    
    /* Blue Tooltip */
    .tooltip { 
      position: relative; display: inline-block; margin-left: 0.4rem;
      width: 18px; height: 18px; background: #1e40af; color: white;
      border-radius: 50%; text-align: center; line-height: 18px;
      font-size: 0.75rem; cursor: help; vertical-align: middle;
    }
    .tooltip .tooltiptext { 
      visibility: hidden; width: 220px; background: #1e293b; color: #fff; 
      text-align: center; border-radius: 6px; padding: 0.6rem; 
      position: absolute; z-index: 1; bottom: 125%; left: 50%; 
      margin-left: -110px; opacity: 0; transition: opacity 0.3s; 
      font-size: 0.85rem; line-height: 1.4; font-weight: normal;
    }
    .tooltip:hover .tooltiptext { visibility: visible; opacity: 1; }
    
    /* ... [all other styles remain the same] ... */
    /* Cards, form, buttons, results, CTAs, educational sections */
    /* [Copy all your existing styles here] */
  </style>
</head>
<body>
  <!-- Gradient Pulse Banner -->
  <div class="banner">
    <h1>Claritea Debt Free <span id="animated-text">Calculator</span></h1>
    <p>See exactly when youâ€™ll be debt-free. No signup. No credit score needed</p>
  </div>

  <div class="container">
    <!-- Debt Input Form -->
    <div class="card">
      <h3>Add a Debt</h3>
      
      <div class="form-group">
        <label>
          Debt Type 
          <span class="tooltip">i
            <span class="tooltiptext">What kind of debt is this?</span>
          </span>
        </label>
        <select id="debt-type">
          <option value="">Select debt type...</option>
          <option value="Car Loan">Car Loan</option>
          <option value="Student Loan">Student Loan</option>
          <option value="Credit Card">Credit Card</option>
          <option value="Other Debt">Other Debt</option>
        </select>
      </div>

      <!-- Balance -->
      <div class="form-group">
        <label>
          Balance Owed 
          <span class="tooltip">i
            <span class="tooltiptext">How much do you still owe? Just the remaining amount.</span>
          </span>
        </label>
        <input id="balance" type="number" placeholder="e.g., 5000">
      </div>

      <!-- APR -->
      <div class="form-group">
        <label>
          Interest Rate (APR) 
          <span class="tooltip">i
            <span class="tooltiptext">The yearly interest rate shown on your bill. Usually 15-25% for credit cards.</span>
          </span>
        </label>
        <input id="apr" type="number" step="0.01" placeholder="e.g., 18.99">
      </div>

      <!-- Min Payment -->
      <div class="form-group">
        <label>
          Minimum Payment 
          <span class="tooltip">i
            <span class="tooltiptext">The smallest amount you must pay each month. Found on your bill.</span>
          </span>
        </label>
        <input id="min-payment" type="number" placeholder="e.g., 100">
      </div>

      <!-- Extra Payment -->
      <div class="form-group">
        <label>
          Extra Monthly Payment (Optional) 
          <span class="tooltip">i
            <span class="tooltiptext">Pay more than the minimum to become debt-free faster! Even $50 extra helps.</span>
          </span>
        </label>
        <input id="extra-payment" type="number" placeholder="e.g., 50 (pay more to get out faster!)">
      </div>

      <button class="btn" onclick="addDebt()">Add Debt â†’</button>
    </div>

    <!-- Debt List -->
    <div id="debt-list" class="card hidden">
      <h3>Your Debts</h3>
      <div id="debts"></div>
    </div>

    <!-- Calculate Button -->
    <div class="card">
      <button class="btn" onclick="calculate()">See My Debt-Free Date â†’</button>
    </div>

    <!-- Results -->
    <div id="results" class="hidden">
      <h3 style="text-align: center; margin-bottom: 1rem;">Your Payoff Plans</h3>
      <div class="results-grid">
        <div class="plan" id="snowball"></div>
        <div class="plan" id="avalanche"></div>
      </div>
    </div>

    <!-- CTAs -->
    <div id="cta-panel" class="hidden">
      <div class="cta">
        <h3>ðŸ’³ Cut Your Interest in Half</h3>
        <p>A 0% balance transfer card could save you $1,000+</p>
        <a href="https://credible.com/your-affiliate-link" target="_blank">â†’ Check If You Qualify (Takes 2 Minutes)</a>
      </div>
      <div class="cta">
        <h3>ðŸ’° Lower Your Monthly Payment</h3>
        <p>Consolidate into one loan with a lower rate</p>
        <a href="https://www.lendingtree.com/your-affiliate-link" target="_blank">â†’ See Your Options (No Impact on Credit)</a>
      </div>
    </div>

    <!-- Educational Content -->
    <div class="edu-section">
      <h2>What Is the Debt Snowball?</h2>
      <p>The debt snowball is a debt payoff method where you pay your debts from smallest to largest, regardless of interest rate. Knock out the smallest debt first. Then, take what you were paying on that debt and add it to the payment of your next smallest debt.</p>
      <p><strong>Why a snowball?</strong> Because just like a snowball rolling downhill, paying off debt is all about momentum. With every debt you pay off, you gain speed until youâ€™re an unstoppable, debt-crushing force.</p>
      <h3>Here's how the debt snowball works:</h3>
      <ul>
        <li><strong>Step 1:</strong> List your debts from smallest to largest regardless of interest rate.</li>
        <li><strong>Step 2:</strong> Make minimum payments on all your debts except the smallest.</li>
        <li><strong>Step 3:</strong> Pay as much as possible on your smallest debt.</li>
        <li><strong>Step 4:</strong> Repeat until each debt is paid in full.</li>
      </ul>
      <p><strong>What happens then?</strong> Freedom. No more payments. No more answering to collectors. No more watching your paychecks disappear.</p>
    </div>

    <div class="edu-section">
      <h2>Debt Snowball vs. Debt Avalanche</h2>
      <p>Maybe youâ€™ve heard of another way to pay off debtâ€”the debt avalanche. With the debt avalanche, you pay your debts in order from the highest interest rate to the lowest, regardless of the balance.</p>
      <p><strong>That might sound like smart math. Hereâ€™s why it's not:</strong> Debt isnâ€™t a math problem. Itâ€™s a behavior problem.</p>
      <p>Motivation is the key to becoming debt-free, not math.</p>
    </div>

    <div class="edu-section">
      <h2>Debt Terms Explained (Simple!)</h2>
      <div class="term-box">
        <h4>Minimum Payment</h4>
        <p>The lowest amount you must pay monthly. Pay less and you'll get penalties.</p>
      </div>
      <div class="term-box">
        <h4>Balance</h4>
        <p>What you still owe. If you borrowed $20,000 and paid $5,000, your balance is $15,000.</p>
      </div>
      <div class="term-box">
        <h4>Interest Rate</h4>
        <p>The cost of borrowing, shown as a percentage. This is how lenders make money.</p>
      </div>
      <div class="term-box">
        <h4>Principal</h4>
        <p>The original amount you borrowed, before interest.</p>
      </div>
      <div class="term-box">
        <h4>Nonmortgage Debt</h4>
        <p>Everything you owe except your house. This includes car loans, credit cards, and student loans.</p>
      </div>
      <div class="term-box">
        <h4>Debt-Free Date</h4>
        <p>The day every cent of your consumer debt is gone. Time to celebrate!</p>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script>
    // Yellow animated text in headline
    const phrases = ['Calculator', 'Strategy', 'Timeline'];
    let currentIndex = 0;
    const animatedText = document.getElementById('animated-text');
    
    setInterval(() => {
      currentIndex = (currentIndex + 1) % phrases.length;
      animatedText.textContent = phrases[currentIndex];
    }, 3000);
    
    // Supabase functions
    const supabaseClient = supabase.createClient('https://gqgpjneoobcopymsvohx.supabase.co', 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdxZ3BqbmVvb2Jjb3B5bXN2b2h4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU1ODE2NzgsImV4cCI6MjA4MTE1NzY3OH0.j_URS7960PNFOrcDNaP-C3dxzXbCsPW1AfOmncV5A68');
    
    async function addDebt() {
      const debt = {
        type: document.getElementById('debt-type').value,
        balance: parseFloat(document.getElementById('balance').value),
        apr: parseFloat(document.getElementById('apr').value),
        min_payment: parseFloat(document.getElementById('min-payment').value),
        extra_payment: parseFloat(document.getElementById('extra-payment').value) || 0
      };
      await supabaseClient.from('debts').insert([debt]);
      loadDebts();
    }
    
    async function loadDebts() {
      const { data } = await supabaseClient.from('debts').select('*');
      const list = document.getElementById('debt-list');
      const debtsDiv = document.getElementById('debts');
      if (data && data.length) {
        list.classList.remove('hidden');
        debtsDiv.innerHTML = data.map(d => `
          <div class="debt-item">
            <span>${d.type}: $${d.balance.toFixed(2)} at ${d.apr}%</span>
            <button class="btn-delete" onclick="deleteDebt(${d.id})">Delete</button>
          </div>
        `).join('');
      }
    }
    
    async function deleteDebt(id) {
      await supabaseClient.from('debts').delete().eq('id', id);
      loadDebts();
    }
    
    async function calculate() {
      const { data: debts } = await supabaseClient.from('debts').select('*');
      if (!debts || !debts.length) return alert('Please add at least one debt first.');
      
      const snowball = simulate([...debts].sort((a,b) => a.balance - b.balance));
      const avalanche = simulate([...debts].sort((a,b) => b.apr - a.apr));
      
      document.getElementById('snowball').innerHTML = `
        <h3>ðŸ”„ Debt Snowball</h3>
        <p><strong>Payoff Time:</strong> ${snowball.months} months</p>
        <p><strong>Total Interest:</strong> $${snowball.interest.toFixed(2)}</p>
        <p style="font-size: 0.9rem; margin-top: 0.5rem;">Pay smallest debts first for quick wins.</p>
      `;
      document.getElementById('avalanche').innerHTML = `
        <h3>ðŸ“ˆ Debt Avalanche</h3>
        <p><strong>Payoff Time:</strong> ${avalanche.months} months</p>
        <p><strong>Total Interest:</strong> $${avalanche.interest.toFixed(2)}</p>
        <p style="font-size: 0.9rem; margin-top: 0.5rem;">Pay highest interest first to save the most money.</p>
      `;
      document.getElementById('results').classList.remove('hidden');
      document.getElementById('cta-panel').classList.remove('hidden');
    }
    
    function simulate(debts) {
      let months = 0, totalInterest = 0, remaining = JSON.parse(JSON.stringify(debts));
      while(remaining.some(d => d.balance > 0)) {
        remaining.forEach(d => {
          if(d.balance > 0) {
            const interest = d.balance * (d.apr / 100) / 12;
            const totalPayment = d.min_payment + (d.extra_payment || 0);
            const payment = Math.min(totalPayment, d.balance + interest);
            d.balance = Math.max(0, d.balance - (payment - interest));
            totalInterest += interest;
          }
        });
        months++;
      }
      return { months, interest: totalInterest };
    }
    
    loadDebts();
  </script>
</body>
</html>
